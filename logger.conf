---
# SPDX-License-Identifier: Apache-2.0
# (c) Copyright 2006 - 2022 Xilinx, Inc. All rights reserved.
polling:
    # polling value unit is milli seconds
  - default: 300

# Capture logs polling default settings.
# Do not change these settings.
sniffers_default:
    # Template capture file name. By default it's *full sniffer id*.
    fname: '%a_%i_%s_%n'
    # Default capture log files directory will be located:
    #    TE_RUN_DIR/caps
    path: caps
    # Max file size for one sniffer. Zero for unlimited.
    max_fsize: 64
    # Max total capture files size for one sniffer. Zero for unlimited.
    space: 256
    # Rotate agent side temporary logs across *x* files. Zero for unlimited.
    rotation: 4
    # Max total files size for all sniffers. Zero for unlimited.
    overall_size: 0
    # Overfill handel method: 0 - rotation; 1 - tail drop.
    ovefill_meth: 0
    # Period of taken logs from agents in ms.
    period: 200

# Capture logs polling user settings.
sniffers:
    fname: '%a_%i_%n_%s'
    # Full path to directory
    path: caps
    max_fsize: 100
    space: 300
    rotation: 3
    overall_size: 1024
    ovefill_meth: 0
    period: 150

threads:
  - name: log_serial
    enabled: "${TE_ENGINE_LOG_SERIAL}"
    args:
      - "${TE_LOG_SERIAL_USER:-tester}"
      - "WARN"
      - "${TE_TST1_LOG_SERIAL_TIMEOUT:-10}"
      - "${CONSERVER_HOST:-kili}:3109:${TE_LOG_SERIAL_USER:-tester}:${TE_ENGINE_LOG_SERIAL}"

listeners:
    - name: dpdk_ol_bublik
      url: https://srv.oktetlabs.ru/prj/xilinx/net/bublik/importruns/
      # Not enabled by default, needs a CLI argument (--logger-listener=dpdk_ol_bublik)
      enabled: no
      # Make sure Bublik is notified about new results every 30 seconds
      interval: 30
      # Use 5 log buffers that are about 64KB in size
      buffer_size: 64536
      buffers_num: 5
      # Don't allow Bublik to stop test execution
      allow_stop: no
      # Bublik requires slashes at the end of URLs
      trailing_slash: yes
      # Include Tester Control and Artifact messages
      rules:
        - filter:
            - exclude: 1
            - include: 1
              entity: Tester
              user: Control
          rule: test_progress
        - filter:
            - exclude: 1
            - include: 1
              level: MI
              user: Artifact
          rule: artifact
    - name: dpdk_xce_bublik
      url: http://xce-te-ws-dpdk/importruns/
      # Not enabled by default, needs a CLI argument (--logger-listener=dpdk_xce_bublik)
      enabled: no
      # Make sure Bublik is notified about new results every 30 seconds
      interval: 30
      # Use 5 log buffers that are about 64KB in size
      buffer_size: 64536
      buffers_num: 5
      # Don't allow Bublik to stop test execution
      allow_stop: no
      # Bublik requires slashes at the end of URLs
      trailing_slash: yes
      # Include Tester Control and Artifact messages
      rules:
        - filter:
            - exclude: 1
            - include: 1
              entity: Tester
              user: Control
          rule: test_progress
        - filter:
            - exclude: 1
            - include: 1
              level: MI
              user: Artifact
          rule: artifact
    - name: socktest_xce_bublik
      url: http://xce-te-ws-socktest/importruns/
      # Not enabled by default, needs a CLI argument (--logger-listener=socktest_xce_bublik)
      enabled: no
      # Make sure Bublik is notified about new results every 30 seconds
      interval: 30
      # Use 5 log buffers that are about 64KB in size
      buffer_size: 64536
      buffers_num: 5
      # Don't allow Bublik to stop test execution
      allow_stop: no
      # Bublik requires slashes at the end of URLs
      trailing_slash: yes
      # Include Tester Control and Artifact messages
      rules:
        - filter:
            - exclude: 1
            - include: 1
              entity: Tester
              user: Control
          rule: test_progress
        - filter:
            - exclude: 1
            - include: 1
              level: MI
              user: Artifact
          rule: artifact
    - name: virtioblk_xce_bublik
      url: http://xce-te-ws-virtioblk/importruns/
      # Not enabled by default, needs a CLI argument (--logger-listener=virtioblk_xce_bublik)
      enabled: no
      # Make sure Bublik is notified about new results every 30 seconds
      interval: 30
      # Use 5 log buffers that are about 64KB in size
      buffer_size: 64536
      buffers_num: 5
      # Don't allow Bublik to stop test execution
      allow_stop: no
      # Bublik requires slashes at the end of URLs
      trailing_slash: yes
      # Include Tester Control and Artifact messages
      rules:
        - filter:
            - exclude: 1
            - include: 1
              entity: Tester
              user: Control
          rule: test_progress
        - filter:
            - exclude: 1
            - include: 1
              level: MI
              user: Artifact
          rule: artifact
